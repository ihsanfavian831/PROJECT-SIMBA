<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SIMBA V.1 - Complete System</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===== LOGIN PAGE STYLES ===== */
    :root{
      --bg: #eef4f9;
      --card:#ffffff;
      --accent:#234a63;
      --accent-hover:#1a3a4d;
      --muted:#97a6b2;
      --input:#f6f9fb;
      --radius:14px;
      --success:#27ae60;
      font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    
    *{box-sizing:border-box}
    html,body{height:100%; margin:0;}
    
    /* Login Page */
    .login-page {
      background: linear-gradient(180deg, #f6fbff 0%, #eef4f9 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      height: 100vh;
      transition: opacity 0.5s ease;
    }

    .login-page.hidden {
      display: none;
    }

    .card{
      width:360px;
      max-width:92vw;
      background:var(--card);
      border-radius:16px;
      padding:34px 28px;
      box-shadow: 0 24px 44px rgba(17,24,39,0.06), inset 0 1px 0 rgba(255,255,255,0.6);
      position:relative;
      overflow:visible;
    }

    .logo-wrap{display:flex;align-items:center;flex-direction:column;gap:14px;margin-bottom:6px}
    .logo{
      width:72px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:linear-gradient(180deg,#f0f6fa,#ddeaf2);box-shadow:0 6px 18px rgba(35,74,99,0.06);
    }
    .logo svg{width:42px;height:34px;}

    h1{font-size:20px;margin:0;color:var(--accent);font-weight:700}
    p.sub{margin:0;margin-top:2px;color:var(--muted);font-size:13px}

    form{margin-top:20px}
    .field{margin-bottom:16px; position: relative;}
    input, select{
      width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(16,24,32,0.06);background:var(--input);font-size:15px;outline:none;transition:box-shadow .12s,border-color .12s;
      font-family: inherit;
    }

    .btn{
      margin-top:14px;padding:12px 16px;border-radius:10px;background:linear-gradient(180deg,var(--accent),#193f52);color:white;border:0;font-weight:600;width:100%;cursor:pointer;box-shadow:0 8px 18px rgba(35,74,99,0.12);
      transition: all 0.3s ease;
    }

    .btn:hover {
      background: linear-gradient(180deg, var(--accent-hover), #153344);
      transform: translateY(-1px);
    }

    .divider{height:1px;background:linear-gradient(90deg,transparent,#e7eef5,transparent);margin:18px 0}
    .copyright{font-size:12px;color:var(--muted);text-align:center}

    .page-shadow{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:420px;height:620px;border-radius:20px;filter:blur(28px);background:linear-gradient(180deg, rgba(33,74,99,0.04), rgba(13,33,47,0.02));z-index:-1;opacity:0.9
    }

    /* ===== DASHBOARD STYLES ===== */
    .dashboard-page {
      display: none;
    }

    .dashboard-page.active {
      display: block;
    }

    /* DARK MODE VARIABLES */
    :root {
      --bg: #fffbea;
      --text: #333;
      --card-bg: #ffffff;
      --sidebar: #ffcc33;
      --sidebar-hover: #ffb300;
      --accent: #ffcc00;
      --success: #00c851;
      --warning: #ffbb33;
      --info: #33b5e5;
      --danger: #ff4444;
    }

    body.dark {
      --bg: #0f172a;
      --text: #e2e8f0;
      --card-bg: #1e293b;
      --sidebar: #b48b00;
      --sidebar-hover: #d1a300;
      --accent: #e6b800;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: 0.3s ease;
      margin: 0;
      overflow-x: hidden;
    }

    /* SIDEBAR */
    .sidebar {
      width: 250px;
      background: var(--sidebar);
      color: #000;
      min-height: 100vh;
      padding: 20px 10px;
      transition: 0.3s;
      position: fixed;
      font-weight: 500;
      z-index: 1000;
    }

    .sidebar.collapsed {
      width: 70px;
    }

    .toggle-btn {
      position: absolute;
      right: -15px;
      top: 20px;
      background: var(--sidebar);
      color: #000;
      width: 30px;
      height: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 50%;
      cursor: pointer;
      transition: 0.3s;
      font-weight: bold;
      border: 2px solid #00000040;
      z-index: 1001;
    }

    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
      transition: 0.3s;
    }

    .sidebar.collapsed h2,
    .sidebar.collapsed .profile h4,
    .sidebar.collapsed .profile p {
      opacity: 0;
      pointer-events: none;
    }

    /* PROFILE */
    .profile {
      text-align: center;
      margin-bottom: 25px;
      transition: 0.3s;
    }

    .profile img {
      width: 70px;
      border-radius: 50%;
      margin-bottom: 10px;
      border: 3px solid #00000030;
      transition: 0.3s;
    }

    .sidebar.collapsed .profile img {
      width: 40px;
    }

    /* MENU */
    .menu {
      list-style: none;
      padding: 0;
      margin-top: 20px;
    }

    .menu li {
      padding: 11px 14px;
      border-radius: 8px;
      margin: 6px 0;
      cursor: pointer;
      transition: 0.25s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      color: #000;
    }

    .menu li:hover,
    .menu .active {
      background-color: var(--sidebar-hover);
      transform: translateX(4px);
    }

    .sidebar.collapsed .menu li span {
      display: none;
    }

    .sidebar.collapsed .section-title {
      display: none;
    }

    .section-title {
      font-size: 13px;
      margin-top: 30px;
      color: #4d3a00;
      text-transform: uppercase;
      border-top: 1px solid #00000030;
      padding-top: 10px;
      font-weight: 600;
    }

    /* MAIN CONTENT */
    .main {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      margin-left: 250px;
      transition: 0.3s;
    }

    .sidebar.collapsed ~ .main {
      margin-left: 70px;
    }

    .header {
      background: var(--accent);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #000;
      font-weight: 600;
      border-bottom: 2px solid #00000020;
      position: sticky;
      top: 0;
      z-index: 999;
    }

    .content {
      padding: 25px 30px;
      animation: fadeIn 0.7s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .dashboard-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .welcome {
      font-size: 15px;
      margin-bottom: 25px;
      opacity: 0.8;
    }

    /* PAGE CONTENT - Hidden by default */
    .page-content {
      display: none;
    }

    .page-content.active {
      display: block;
    }

    /* CARDS */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .card-dash {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 22px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: 0.25s ease;
      cursor: pointer;
      border: 2px solid #00000010;
      position: relative;
      overflow: hidden;
    }

    .card-dash::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--accent);
    }

    .card-dash:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    /* STATUS BOX */
    .rekap {
      margin-top: 30px;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .status {
      flex: 1;
      min-width: 130px;
      padding: 18px;
      border-radius: 12px;
      text-align: center;
      color: white;
      font-weight: 600;
      transition: 0.3s;
      position: relative;
      overflow: hidden;
    }

    .status::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      transition: 0.5s;
    }

    .status:hover::after {
      transform: rotate(45deg) translate(50%, 50%);
    }

    .status:hover {
      transform: translateY(-5px) scale(1.05);
    }

    .hadir {
      background: var(--success);
    }

    .sakit {
      background: var(--warning);
    }

    .izin {
      background: var(--info);
    }

    .alfa {
      background: var(--danger);
    }

    /* DARK MODE BUTTON */
    .dark-toggle {
      cursor: pointer;
      padding: 6px 14px;
      background: #00000020;
      border-radius: 8px;
      font-size: 13px;
      transition: 0.3s;
      font-weight: 600;
    }

    body.dark .dark-toggle {
      background: #ffffff30;
      color: #fff;
    }

    /* USER INFO */
    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* LOGOUT BUTTON */
    .logout-btn {
      cursor: pointer;
      padding: 6px 12px;
      background: #ff4444;
      color: white;
      border-radius: 8px;
      font-size: 13px;
      transition: 0.3s;
      font-weight: 600;
      border: none;
    }

    .logout-btn:hover {
      background: #cc0000;
      transform: scale(1.05);
    }

    /* NOTIFICATION BELL */
    .notification-bell {
      position: relative;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      transition: 0.3s;
    }

    .notification-bell:hover {
      background: #00000015;
    }

    .notification-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--danger);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    /* QUICK ACTIONS */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .action-btn {
      background: var(--card-bg);
      border: 2px dashed var(--accent);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: 0.3s;
      font-weight: 600;
    }

    .action-btn:hover {
      background: var(--accent);
      transform: scale(1.05);
    }

    /* PROGRESS BARS */
    .progress-section {
      margin-top: 30px;
    }

    .progress-item {
      margin: 15px 0;
    }

    .progress-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
      font-size: 14px;
    }

    .progress-bar {
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s ease-in-out;
    }

    /* CALENDAR */
    .calendar-widget {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 20px;
      margin-top: 20px;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }

    .calendar-day {
      text-align: center;
      padding: 8px;
      border-radius: 8px;
      font-size: 12px;
    }

    .calendar-day.current {
      background: var(--accent);
      color: #000;
      font-weight: bold;
    }

    /* ===== KARTU PELAJAR STYLES ===== */
    .kartu-pelajar-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .kartu-pelajar-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      padding: 30px;
      color: white;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }

    .kartu-pelajar-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200px;
      height: 200px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
    }

    .kartu-pelajar-card::after {
      content: '';
      position: absolute;
      bottom: -30%;
      left: -10%;
      width: 150px;
      height: 150px;
      background: rgba(255,255,255,0.05);
      border-radius: 50%;
    }

    .kartu-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
      position: relative;
      z-index: 2;
    }

    .kartu-school {
      text-align: right;
    }

    .kartu-school h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 700;
    }

    .kartu-school p {
      margin: 5px 0 0 0;
      font-size: 12px;
      opacity: 0.9;
    }

    .kartu-photo {
      width: 120px;
      height: 150px;
      background: white;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      font-size: 12px;
      text-align: center;
      padding: 10px;
      position: relative;
      z-index: 2;
    }

    .kartu-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 8px;
    }

    .kartu-info {
      position: relative;
      z-index: 2;
    }

    .kartu-info h1 {
      font-size: 24px;
      margin: 0 0 5px 0;
      font-weight: 700;
    }

    .kartu-info .nisn {
      font-size: 16px;
      margin-bottom: 20px;
      opacity: 0.9;
    }

    .kartu-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 25px;
    }

    .detail-item h3 {
      font-size: 12px;
      margin: 0 0 5px 0;
      opacity: 0.8;
      font-weight: 600;
    }

    .detail-item p {
      font-size: 14px;
      margin: 0;
      font-weight: 500;
    }

    .kartu-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      z-index: 2;
      border-top: 1px solid rgba(255,255,255,0.3);
      padding-top: 20px;
    }

    .kartu-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn-kartu {
      padding: 8px 16px;
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      font-size: 12px;
    }

    .action-btn-kartu:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }

    .kartu-validity {
      text-align: right;
    }

    .kartu-validity p {
      margin: 0;
      font-size: 11px;
      opacity: 0.8;
    }

    /* Download Buttons */
    .download-section {
      margin-top: 30px;
      text-align: center;
    }

    .download-btn {
      padding: 12px 24px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      margin: 0 10px;
      font-size: 14px;
    }

    .download-btn:hover {
      background: var(--sidebar-hover);
      transform: translateY(-2px);
    }

    /* ===== E-LEARNING STYLES ===== */
    .elearning-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: 0.3s;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-number {
      font-size: 32px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 14px;
      color: var(--muted);
      font-weight: 600;
    }

    .mata-pelajaran-table {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 25px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .table-header {
      display: grid;
      grid-template-columns: 3fr 1fr 1fr 1fr;
      gap: 15px;
      padding: 15px;
      background: var(--accent);
      color: #000;
      border-radius: 10px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .table-row {
      display: grid;
      grid-template-columns: 3fr 1fr 1fr 1fr;
      gap: 15px;
      padding: 15px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      transition: 0.3s;
    }

    .table-row:hover {
      background: rgba(0,0,0,0.02);
      transform: translateX(5px);
    }

    .mapel-name {
      font-weight: 600;
    }

    .mapel-guru {
      font-size: 12px;
      color: var(--muted);
      margin-top: 5px;
    }

    .materi-count, .tugas-count {
      text-align: center;
      font-weight: 600;
    }

    .action-cell {
      text-align: center;
    }

    .action-btn-elearning {
      padding: 6px 12px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }

    .action-btn-elearning:hover {
      background: var(--sidebar-hover);
      transform: scale(1.05);
    }

    /* Materi Terbaru Section */
    .materi-terbaru {
      margin-top: 30px;
    }

    .materi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .materi-card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: 0.3s;
      border-left: 4px solid var(--accent);
    }

    .materi-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }

    .materi-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .materi-title {
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 5px;
    }

    .materi-meta {
      font-size: 12px;
      color: var(--muted);
    }

    .materi-badge {
      background: var(--accent);
      color: #000;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: 600;
    }

    .materi-content {
      font-size: 14px;
      line-height: 1.5;
      color: var(--text);
      opacity: 0.8;
    }

    .materi-actions {
      margin-top: 15px;
      display: flex;
      gap: 10px;
    }

    .btn-materi {
      padding: 6px 12px;
      background: rgba(0,0,0,0.05);
      border: none;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: 0.3s;
    }

    .btn-materi:hover {
      background: var(--accent);
    }

    /* Tugas Section */
    .tugas-section {
      margin-top: 30px;
    }

    .tugas-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .tugas-card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: 0.3s;
      border-left: 4px solid var(--info);
    }

    .tugas-card:hover {
      transform: translateY(-5px);
    }

    .tugas-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .tugas-title {
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 5px;
    }

    .tugas-meta {
      font-size: 12px;
      color: var(--muted);
    }

    .tugas-deadline {
      background: var(--danger);
      color: white;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: 600;
    }

    .tugas-guru {
      font-size: 12px;
      color: var(--muted);
      margin-top: 5px;
    }

    .tugas-actions {
      margin-top: 15px;
      display: flex;
      gap: 10px;
    }

    /* ===== NILAI STYLES ===== */
    .nilai-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .nilai-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .filter-section {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .filter-select {
      padding: 10px 15px;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,0.1);
      background: var(--card-bg);
      font-size: 14px;
      cursor: pointer;
    }

    .lipat-nilai-btn {
      padding: 12px 20px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    .lipat-nilai-btn:hover {
      background: var(--sidebar-hover);
      transform: translateY(-2px);
    }

    .nilai-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .nilai-stat-card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: 0.3s;
    }

    .nilai-stat-card:hover {
      transform: translateY(-5px);
    }

    .nilai-stat-number {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .rata-rata {
      color: var(--success);
    }

    .tertinggi {
      color: var(--accent);
    }

    .terendah {
      color: var(--danger);
    }

    .nilai-stat-label {
      font-size: 14px;
      color: var(--muted);
      font-weight: 600;
    }

    .nilai-table-container {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 25px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .nilai-table {
      width: 100%;
      border-collapse: collapse;
    }

    .nilai-table th {
      background: var(--accent);
      color: #000;
      padding: 15px;
      text-align: left;
      font-weight: 600;
      border-radius: 8px;
    }

    .nilai-table td {
      padding: 15px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .nilai-table tr:hover {
      background: rgba(0,0,0,0.02);
    }

    .mapel-cell {
      font-weight: 600;
    }

    .nilai-cell {
      text-align: center;
      font-weight: 600;
    }

    .nilai-A { color: var(--success); }
    .nilai-B { color: var(--info); }
    .nilai-C { color: var(--warning); }
    .nilai-D { color: var(--danger); }

    .predikat-cell {
      text-align: center;
      font-weight: 600;
    }

    .keterangan-cell {
      font-size: 12px;
      color: var(--muted);
    }

    .download-nilai-section {
      margin-top: 30px;
      text-align: center;
    }

    .download-nilai-btn {
      padding: 12px 24px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      margin: 0 10px;
      font-size: 14px;
    }

    .download-nilai-btn:hover {
      background: var(--sidebar-hover);
      transform: translateY(-2px);
    }

    /* ===== TEACHER SPECIFIC STYLES ===== */
    .teacher-hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 25px;
    }

    .teacher-quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 25px 0;
    }

    .classes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .class-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid var(--accent);
      cursor: pointer;
      transition: 0.3s;
    }

    .class-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    .class-stats {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

    /* QR Absensi Styles */
    .qr-absensi-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .qr-generator-section {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 25px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .btn-generate-qr {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    .btn-generate-qr:hover {
      transform: translateY(-2px);
    }

    .qr-display-section {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 25px;
      text-align: center;
    }

    .qr-code-container {
      margin: 20px 0;
    }

    .qr-placeholder {
      background: white;
      padding: 30px;
      border-radius: 15px;
      display: inline-block;
      border: 2px dashed #ccc;
    }

    .qr-timer {
      font-size: 24px;
      font-weight: bold;
      color: var(--accent);
      margin: 15px 0;
    }

    .absensi-stats {
      margin-top: 25px;
      text-align: left;
    }

    .absensi-entry {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .btn-stop-qr {
      background: var(--danger);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 15px;
    }

    /* Management Nilai Styles */
    .nilai-management-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .bulk-input-section {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 25px;
    }

    .nilai-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .nilai-table th {
      background: var(--accent);
      color: #000;
      padding: 15px;
      text-align: left;
      font-weight: 600;
    }

    .nilai-table td {
      padding: 12px 15px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .nilai-input {
      width: 80px;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
      text-align: center;
    }

    .btn-save-nilai {
      background: var(--success);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 15px;
    }

    /* Loading Animation */
    .loader {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .loader.active {
      display: flex;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid var(--accent);
      border-top: 5px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }

      .sidebar.active {
        transform: translateX(0);
      }

      .main {
        margin-left: 0 !important;
      }

      .header {
        padding: 15px 20px;
      }

      .content {
        padding: 20px 15px;
      }

      .kartu-details {
        grid-template-columns: 1fr;
      }

      .kartu-header {
        flex-direction: column;
        text-align: center;
      }

      .kartu-school {
        text-align: center;
        margin-bottom: 20px;
      }

      .table-header,
      .table-row {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .materi-grid,
      .tugas-grid {
        grid-template-columns: 1fr;
      }

      .nilai-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .filter-section {
        flex-direction: column;
        width: 100%;
      }

      .filter-select {
        width: 100%;
      }

      .teacher-quick-actions {
        grid-template-columns: 1fr;
      }

      .classes-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <!-- ===== LOADER ===== -->
  <div class="loader" id="loader">
    <div class="spinner"></div>
    <p style="margin-top: 20px;">Loading SIMBA V.1...</p>
  </div>

  <!-- ===== LOGIN PAGE ===== -->
  <div class="login-page" id="loginPage">
    <div class="card" role="main" aria-label="Login SIMBA">
      <div class="logo-wrap">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 64 48" xmlns="http://www.w3.org/2000/svg" fill="none">
            <g fill="#25607E">
              <path d="M48 24c2.2 0 4.1.9 5.5 2.4C55.9 28 57 29.9 57 32c0 4.4-3.6 8-8 8H18c-5.5 0-10-4.5-10-10 0-4.6 3.2-8.5 7.6-9.6C16.8 18.9 21.1 16 26 16c4.1 0 7.6 2.3 9.4 5.6C38 21 42 20 46 20c1.1 0 2.2.1 3.3.3C51.1 20.4 49.6 24 48 24z"/>
              <path d="M24 26h18v-6l8 6H24z" fill="#fff"/>
            </g>
          </svg>
        </div>
        <div style="text-align:center">
          <h1>SIMBA V.1</h1>
          <p class="sub">SMK Bunda Kandung</p>
        </div>
      </div>

      <form onsubmit="event.preventDefault(); doLogin();">
        <div class="field">
          <input id="username" placeholder="Username" autocomplete="username" />
        </div>
        <div class="field">
          <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
        </div>
        <div class="field">
          <select id="role">
            <option value="">- Hak Akses -</option>
            <option>Karyawan</option>
            <option>Guru</option>
            <option>Siswa</option>
          </select>
        </div>
        <button class="btn" type="submit">Masuk</button>
      </form>

      <div class="divider"></div>
      <div class="copyright">Copyright ¬© 2025. V.1</div>
    </div>
    <div class="page-shadow" aria-hidden="true"></div>
  </div>

  <!-- ===== DASHBOARD PAGE ===== -->
  <div class="dashboard-page" id="dashboardPage">
    <!-- SIDEBAR WILL BE DYNAMICALLY GENERATED -->
    <div class="sidebar" id="sidebar">
      <!-- Content will be replaced based on role -->
    </div>

    <!-- MAIN CONTENT -->
    <div class="main">
      <div class="header">
        <h3 id="greetText"></h3>
        <div class="user-info">
          <div class="notification-bell" onclick="showNotifications()">
            üîî
            <div class="notification-count">3</div>
          </div>
          <span id="headerName">Hi, User</span>
          &nbsp;&nbsp;
          <span class="dark-toggle" onclick="toggleDark()">üåô Mode Gelap</span>
          &nbsp;&nbsp;
          <button class="logout-btn" onclick="doLogout()">üö™ Logout</button>
        </div>
      </div>

      <div class="content" id="mainContent">
        <!-- Content will be dynamically generated based on role -->
      </div>
    </div>
  </div>

  <script>
    // ===== GLOBAL VARIABLES =====
    let currentUserRole = '';
    let qrTimer;
    let qrTimeLeft = 0;

    // ===== LOGIN FUNCTIONS =====
    function doLogin() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      const role = document.getElementById('role').value;

      if (!username) {
        alert('Masukkan username dulu bro.');
        return;
      }
      if (!password) {
        alert('Password jangan lupa bro.');
        return;
      }
      if (!role) {
        alert('Pilih hak akses dulu.');
        return;
      }

      showLoader();

      setTimeout(() => {
        const userData = {
          username: username,
          role: role,
          loginTime: new Date().toISOString()
        };
        
        localStorage.setItem('simba_user', JSON.stringify(userData));
        currentUserRole = role;
        hideLoader();
        
        if (role === "Guru") {
          switchToTeacherDashboard(userData);
        } else {
          switchToStudentDashboard(userData);
        }
      }, 1500);
    }

    function showLoader() {
      document.getElementById('loader').classList.add('active');
    }

    function hideLoader() {
      document.getElementById('loader').classList.remove('active');
    }

    // ===== STUDENT DASHBOARD =====
    function switchToStudentDashboard(userData) {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('dashboardPage').classList.add('active');
      
      document.getElementById('sidebar').innerHTML = generateStudentSidebar();
      document.getElementById('mainContent').innerHTML = generateStudentContent();
      
      updateStudentDashboard(userData);
      initializeDashboard();
    }

    function generateStudentSidebar() {
      return `
        <div class="toggle-btn" onclick="toggleSidebar()">‚Æú</div>
        <h2>SIMBA V.1</h2>
        <div class="profile">
          <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" id="profileImage" />
          <h4 id="profileName">Siswa</h4>
          <p id="profileRole">Siswa</p>
        </div>
        <ul class="menu">
          <li class="menu-item active" onclick="showStudentPage('dashboard')">üè† <span>Dashboard</span></li>
          <li class="menu-item" onclick="showStudentPage('kartu-pelajar')">ü™™ <span>Kartu Pelajar</span></li>
          <li class="menu-item" onclick="showStudentPage('e-learning')">üíº <span>E Learning</span></li>
          <li class="menu-item" onclick="showStudentPage('nilai')">üìä <span>Nilai</span></li>
          <li class="menu-item" onclick="showStudentPage('jadwal')">üìÖ <span>Jadwal</span></li>
        </ul>
        <div class="section-title">Pengaturan</div>
        <ul class="menu">
          <li class="menu-item" onclick="showStudentPage('biodata')">üë§ <span>Biodata</span></li>
          <li class="menu-item" onclick="showStudentPage('password')">üîë <span>Password</span></li>
          <li onclick="doLogout()">üö™ <span>Logout</span></li>
        </ul>
      `;
    }

    function generateStudentContent() {
      return `
        <!-- STUDENT DASHBOARD -->
        <div id="student-dashboard-page" class="page-content active">
          <div class="dashboard-title">Dashboard</div>
          <div class="welcome">Selamat datang kembali di Sistem SIMBA!</div>

          <div class="cards">
            <div class="card-dash" onclick="showAbsenModal()">
              <h4>Belum Absen</h4>
              <p id="todayDate"></p>
              <small style="color: var(--danger); font-weight: bold;">Klik untuk absen sekarang!</small>
            </div>

            <div class="card-dash">
              <h4>Agenda Sekolah</h4>
              <p><b>Kegiatan SAS</b><br />Ujian sekolah akhir semester</p>
            </div>

            <div class="card-dash">
              <h4>Pelajaran Selanjutnya</h4>
              <p><b>Matematika</b><br />10:00 - 11:30 WIB</p>
            </div>

            <div class="card-dash">
              <h4>Info Login</h4>
              <p>Anda login sebagai: <b id="loginInfoRole">Siswa</b></p>
              <p>Username: <b id="loginInfoUser">siswa</b></p>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions">
            <div class="action-btn" onclick="quickAction('absen')">üìù Absen Sekarang</div>
            <div class="action-btn" onclick="quickAction('tugas')">üìö Lihat Tugas</div>
            <div class="action-btn" onclick="quickAction('jadwal')">üìÖ Jadwal Hari Ini</div>
            <div class="action-btn" onclick="quickAction('rapor')">üìä Nilai Terbaru</div>
          </div>

          <div class="rekap">
            <div class="status hadir"><h2>12</h2><p>Hadir</p></div>
            <div class="status sakit"><h2>1</h2><p>Sakit</p></div>
            <div class="status izin"><h2>2</h2><p>Izin</p></div>
            <div class="status alfa"><h2>0</h2><p>Alfa</p></div>
          </div>

          <!-- Progress Section -->
          <div class="progress-section">
            <h3>Progress Belajar</h3>
            <div class="progress-item">
              <div class="progress-label">
                <span>Matematika</span>
                <span>75%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 75%; background: var(--success);"></div>
              </div>
            </div>
            <div class="progress-item">
              <div class="progress-label">
                <span>Bahasa Indonesia</span>
                <span>60%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 60%; background: var(--info);"></div>
              </div>
            </div>
            <div class="progress-item">
              <div class="progress-label">
                <span>IPA</span>
                <span>85%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 85%; background: var(--accent);"></div>
              </div>
            </div>
          </div>

          <!-- Calendar Widget -->
          <div class="calendar-widget">
            <div class="calendar-header">
              <h4>Kalender Akademik</h4>
              <button onclick="showFullCalendar()">Lihat Semua</button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
              <!-- Calendar will be generated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- KARTU PELAJAR PAGE -->
        <div id="student-kartu-pelajar-page" class="page-content">
          <div class="dashboard-title">Kartu Pelajar</div>
          <div class="welcome">Kartu identitas pelajar resmi Anda</div>

          <div class="kartu-pelajar-container">
            <div class="kartu-pelajar-card">
              <div class="kartu-header">
                <div class="kartu-school">
                  <h2>SMK BUNDA KANDUNG</h2>
                  <p>SEKOLAH UNGGULAN TERBAIK</p>
                </div>
                <div class="kartu-photo">
                  <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Foto Pelajar">
                </div>
              </div>

              <div class="kartu-info">
                <h1>MUHAMMAD IHSAN FAVIAN</h1>
                <p class="nisn">NISN: 0048592038</p>

                <div class="kartu-details">
                  <div class="detail-item">
                    <h3>TEMPAT, TANGGAL LAHIR</h3>
                    <p>Jakarta, 18 November 2009</p>
                  </div>
                  <div class="detail-item">
                    <h3>JENIS KELAMIN</h3>
                    <p>Laki-laki</p>
                  </div>
                  <div class="detail-item">
                    <h3>KELAS</h3>
                    <p>X RPL</p>
                  </div>
                  <div class="detail-item">
                    <h3>JURUSAN</h3>
                    <p>Rekayasa Perangkat Lunak</p>
                  </div>
                  <div class="detail-item">
                    <h3>ALAMAT</h3>
                    <p>Jl. AUP No. 12, Jakarta</p>
                  </div>
                  <div class="detail-item">
                    <h3>STATUS</h3>
                    <p>AKTIF</p>
                  </div>
                </div>
              </div>

              <div class="kartu-footer">
                <div class="kartu-actions">
                  <button class="action-btn-kartu" onclick="downloadKartu('pdf')">üìÑ Simpan PDF</button>
                  <button class="action-btn-kartu" onclick="downloadKartu('image')">üñºÔ∏è Simpan Gambar</button>
                </div>
                <div class="kartu-validity">
                  <p>Berlaku hingga: Selama Menjadi Siswa/i Bunda Kandung</p>
                  <p>SIMBA V.1 - SMK BUNDA KANDUNG</p>
                </div>
              </div>
            </div>

            <div class="download-section">
              <button class="download-btn" onclick="downloadKartu('pdf')">
                üì• Download Kartu Pelajar (PDF)
              </button>
              <button class="download-btn" onclick="downloadKartu('image')">
                üñºÔ∏è Download sebagai Gambar
              </button>
            </div>
          </div>
        </div>

        <!-- E-LEARNING PAGE -->
        <div id="student-e-learning-page" class="page-content">
          <div class="dashboard-title">E-Learning</div>
          <div class="welcome">Pembelajaran Online - Selamat belajar!</div>

          <!-- Stats Cards -->
          <div class="elearning-stats">
            <div class="stat-card">
              <div class="stat-number">8</div>
              <div class="stat-label">Mata Pelajaran</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">5</div>
              <div class="stat-label">Materi Ajar</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">8</div>
              <div class="stat-label">Tugas</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">3</div>
              <div class="stat-label">Tugas Deadline</div>
            </div>
          </div>

          <!-- Daftar Mata Pelajaran -->
          <div class="mata-pelajaran-table">
            <h3 style="margin-bottom: 20px;">Daftar Semua Mata Pelajaran</h3>
            
            <div class="table-header">
              <div>Nama Mata Pelajaran</div>
              <div>Materi</div>
              <div>Tugas</div>
              <div>Action</div>
            </div>

            <!-- Bahasa Indonesia -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Bahasa Indonesia</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">0 Materi</div>
              <div class="tugas-count">1 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('Bahasa Indonesia')">üìñ Buka</button>
              </div>
            </div>

            <!-- Pendidikan Agama -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Pendidikan Agama Dan Budi Pekerti</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">0 Materi</div>
              <div class="tugas-count">1 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('Pendidikan Agama')">üìñ Buka</button>
              </div>
            </div>

            <!-- PJOK -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Pendidikan Jasmani Olahraga Dan Kesehatan</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">0 Materi</div>
              <div class="tugas-count">0 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('PJOK')">üìñ Buka</button>
              </div>
            </div>

            <!-- PPKn -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Pendidikan Pancasila</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">0 Materi</div>
              <div class="tugas-count">0 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('PPKn')">üìñ Buka</button>
              </div>
            </div>

            <!-- Sejarah -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Sejarah</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">0 Materi</div>
              <div class="tugas-count">0 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('Sejarah')">üìñ Buka</button>
              </div>
            </div>

            <!-- Seni Budaya -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Seni Budaya</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">1 Materi</div>
              <div class="tugas-count">3 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('Seni Budaya')">üìñ Buka</button>
              </div>
            </div>

            <!-- Bahasa Inggris -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Bahasa Inggris</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">1 Materi</div>
              <div class="tugas-count">0 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('Bahasa Inggris')">üìñ Buka</button>
              </div>
            </div>

            <!-- Informatika -->
            <div class="table-row">
              <div>
                <div class="mapel-name">Informatika</div>
                <div class="mapel-guru">Guru Bidang Study : -</div>
              </div>
              <div class="materi-count">0 Materi</div>
              <div class="tugas-count">0 Tugas</div>
              <div class="action-cell">
                <button class="action-btn-elearning" onclick="bukaMataPelajaran('Informatika')">üìñ Buka</button>
              </div>
            </div>
          </div>

          <!-- Materi Terbaru -->
          <div class="materi-terbaru">
            <h3 style="margin: 30px 0 20px 0;">Materi Terbaru</h3>
            
            <div class="materi-grid">
              <div class="materi-card">
                <div class="materi-header">
                  <div>
                    <div class="materi-title">K3LH - Keselamatan Kerja</div>
                    <div class="materi-meta">Pemrograman Terstruktur ‚Ä¢ 20 November 2025</div>
                  </div>
                  <div class="materi-badge">BARU</div>
                </div>
                <div class="materi-content">
                  Simbol rambu K3LH (Keselamatan, Kesehatan Kerja, dan Lingkungan Hidup) umumnya mengikuti standar internasional dan nasional di Indonesia, seperti yang diatur dalam Peraturan Menteri Tenaga Kerja...
                </div>
                <div class="materi-actions">
                  <button class="btn-materi" onclick="bukaMateri('K3LH')">üìö Baca Materi</button>
                  <button class="btn-materi" onclick="downloadMateri('K3LH')">üì• Download</button>
                </div>
              </div>

              <div class="materi-card">
                <div class="materi-header">
                  <div>
                    <div class="materi-title">Unsur-unsur Musik</div>
                    <div class="materi-meta">Seni Budaya ‚Ä¢ 18 Oktober 2025</div>
                  </div>
                  <div class="materi-badge">BARU</div>
                </div>
                <div class="materi-content">
                  Musik terdiri dari berbagai unsur yang membentuk sebuah komposisi yang harmonis. Unsur-unsur tersebut meliputi melodi, ritme, harmoni, dinamika, dan warna suara...
                </div>
                <div class="materi-actions">
                  <button class="btn-materi" onclick="bukaMateri('Unsur Musik')">üìö Baca Materi</button>
                  <button class="btn-materi" onclick="downloadMateri('Unsur Musik')">üì• Download</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Tugas Terbaru -->
          <div class="tugas-section">
            <h3 style="margin: 30px 0 20px 0;">Tugas Terbaru</h3>
            
            <div class="tugas-grid">
              <div class="tugas-card">
                <div class="tugas-header">
                  <div>
                    <div class="tugas-title">Deret Aritmatika</div>
                    <div class="tugas-meta">Matematika ‚Ä¢ Oleh : -</div>
                  </div>
                  <div class="tugas-deadline">TANPA DEADLINE</div>
                </div>
                <div class="tugas-guru">
                  Kerjakan soal deret aritmatika pada halaman 45-48 buku paket
                </div>
                <div class="tugas-actions">
                  <button class="btn-materi" onclick="kerjakanTugas('Deret Aritmatika')">‚úèÔ∏è Kerjakan</button>
                  <button class="btn-materi" onclick="lihatDetailTugas('Deret Aritmatika')">üëÅÔ∏è Detail</button>
                </div>
              </div>

              <div class="tugas-card">
                <div class="tugas-header">
                  <div>
                    <div class="tugas-title">Cerpen</div>
                    <div class="tugas-meta">Bahasa Indonesia ‚Ä¢ Oleh : -</div>
                  </div>
                  <div class="tugas-deadline">4 NOV 2025</div>
                </div>
                <div class="tugas-guru">
                  Buat cerpen dengan tema "Persahabatan" minimal 3 halaman
                </div>
                <div class="tugas-actions">
                  <button class="btn-materi" onclick="kerjakanTugas('Cerpen')">‚úèÔ∏è Kerjakan</button>
                  <button class="btn-materi" onclick="lihatDetailTugas('Cerpen')">üëÅÔ∏è Detail</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- NILAI PAGE -->
        <div id="student-nilai-page" class="page-content">
          <div class="dashboard-title">Nilai AHB</div>
          <div class="welcome">Nilai Ujian Assemen Harian Bersama</div>

          <div class="nilai-container">
            <!-- Header dengan Filter -->
            <div class="nilai-header">
              <div class="filter-section">
                <select class="filter-select" id="semesterFilter" onchange="filterNilai()">
                  <option value="">- Pilih Semester -</option>
                  <option value="1">Semester 1</option>
                  <option value="2">Semester 2</option>
                </select>
                
                <select class="filter-select" id="jenisUjianFilter" onchange="filterNilai()">
                  <option value="">- Pilih Jenis Ujian -</option>
                  <option value="sts">STS (Sumatif Tengah Semester)</option>
                  <option value="sas">SAS (Sumatif Akhir Semester)</option>
                  <option value="ahs">AHS (Assemen Harian)</option>
                </select>
              </div>
              
              <button class="lipat-nilai-btn" onclick="lipatNilai()">
                üìÑ Lipat Nilai
              </button>
            </div>

            <!-- Stats Cards -->
            <div class="nilai-stats">
              <div class="nilai-stat-card">
                <div class="nilai-stat-number rata-rata">85.2</div>
                <div class="nilai-stat-label">Rata-rata Nilai</div>
              </div>
              <div class="nilai-stat-card">
                <div class="nilai-stat-number tertinggi">95.0</div>
                <div class="nilai-stat-label">Nilai Tertinggi</div>
              </div>
              <div class="nilai-stat-card">
                <div class="nilai-stat-number terendah">75.5</div>
                <div class="nilai-stat-label">Nilai Terendah</div>
              </div>
              <div class="nilai-stat-card">
                <div class="nilai-stat-number" style="color: var(--info);">8</div>
                <div class="nilai-stat-label">Mata Pelajaran</div>
              </div>
            </div>

            <!-- Tabel Nilai -->
            <div class="nilai-table-container">
              <h3 style="margin-bottom: 20px;">Daftar Nilai Ujian</h3>
              
              <table class="nilai-table">
                <thead>
                  <tr>
                    <th>Mata Pelajaran</th>
                    <th>STS</th>
                    <th>SAS</th>
                    <th>Nilai Akhir</th>
                    <th>Predikat</th>
                    <th>Keterangan</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="mapel-cell">Matematika</td>
                    <td class="nilai-cell nilai-A">88.5</td>
                    <td class="nilai-cell nilai-A">92.0</td>
                    <td class="nilai-cell nilai-A">90.2</td>
                    <td class="predikat-cell">A</td>
                    <td class="keterangan-cell">Sangat Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">Bahasa Indonesia</td>
                    <td class="nilai-cell nilai-A">85.0</td>
                    <td class="nilai-cell nilai-B">82.5</td>
                    <td class="nilai-cell nilai-B">83.8</td>
                    <td class="predikat-cell">B</td>
                    <td class="keterangan-cell">Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">Bahasa Inggris</td>
                    <td class="nilai-cell nilai-A">90.0</td>
                    <td class="nilai-cell nilai-A">95.0</td>
                    <td class="nilai-cell nilai-A">92.5</td>
                    <td class="predikat-cell">A</td>
                    <td class="keterangan-cell">Sangat Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">IPA</td>
                    <td class="nilai-cell nilai-B">78.0</td>
                    <td class="nilai-cell nilai-B">80.5</td>
                    <td class="nilai-cell nilai-B">79.2</td>
                    <td class="predikat-cell">B</td>
                    <td class="keterangan-cell">Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">IPS</td>
                    <td class="nilai-cell nilai-A">87.5</td>
                    <td class="nilai-cell nilai-A">89.0</td>
                    <td class="nilai-cell nilai-A">88.2</td>
                    <td class="predikat-cell">A</td>
                    <td class="keterangan-cell">Sangat Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">Pendidikan Agama</td>
                    <td class="nilai-cell nilai-A">92.0</td>
                    <td class="nilai-cell nilai-A">94.5</td>
                    <td class="nilai-cell nilai-A">93.2</td>
                    <td class="predikat-cell">A</td>
                    <td class="keterangan-cell">Sangat Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">PKN</td>
                    <td class="nilai-cell nilai-B">79.5</td>
                    <td class="nilai-cell nilai-B">81.0</td>
                    <td class="nilai-cell nilai-B">80.2</td>
                    <td class="predikat-cell">B</td>
                    <td class="keterangan-cell">Memuaskan</td>
                  </tr>
                  <tr>
                    <td class="mapel-cell">Seni Budaya</td>
                    <td class="nilai-cell nilai-A">88.0</td>
                    <td class="nilai-cell nilai-A">91.5</td>
                    <td class="nilai-cell nilai-A">89.8</td>
                    <td class="predikat-cell">A</td>
                    <td class="keterangan-cell">Sangat Memuaskan</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Download Section -->
            <div class="download-nilai-section">
              <button class="download-nilai-btn" onclick="downloadNilai('pdf')">
                üì• Download Nilai (PDF)
              </button>
              <button class="download-nilai-btn" onclick="downloadNilai('excel')">
                üìä Download Nilai (Excel)
              </button>
            </div>

            <!-- Info Tambahan -->
            <div style="margin-top: 30px; text-align: center; color: var(--muted); font-size: 12px;">
              <p>Silahkan pilih form diatas atau klik tombol "Lipat Nilai" untuk melihat detail nilai.</p>
              <p style="margin-top: 10px;">Copyright ¬© 2023 <strong>SIAS V.2 - Borcess Ashold Hajar</strong></p>
            </div>
          </div>
        </div>

        <!-- PLACEHOLDER PAGES -->
        <div id="student-jadwal-page" class="page-content">
          <div class="dashboard-title">Jadwal</div>
          <div class="welcome">Halaman Jadwal akan segera tersedia</div>
        </div>

        <div id="student-biodata-page" class="page-content">
          <div class="dashboard-title">Biodata</div>
          <div class="welcome">Halaman Biodata akan segera tersedia</div>
        </div>

        <div id="student-password-page" class="page-content">
          <div class="dashboard-title">Password</div>
          <div class="welcome">Halaman Ganti Password akan segera tersedia</div>
        </div>
      `;
    }

    // ===== TEACHER DASHBOARD =====
    function switchToTeacherDashboard(userData) {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('dashboardPage').classList.add('active');
      
      document.getElementById('sidebar').innerHTML = generateTeacherSidebar();
      document.getElementById('mainContent').innerHTML = generateTeacherContent();
      
      updateTeacherDashboard(userData);
      initializeTeacherDashboard();
    }

    function generateTeacherSidebar() {
      return `
        <div class="toggle-btn" onclick="toggleSidebar()">‚Æú</div>
        <h2>üë®‚Äçüè´ GURU SIMBA</h2>
        <div class="profile">
          <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" id="teacherProfileImage" />
          <h4 id="teacherName">Guru</h4>
          <p id="teacherSubject">Mata Pelajaran</p>
        </div>
        <ul class="menu">
          <li class="menu-item active" onclick="showTeacherPage('dashboard')">üè† <span>Dashboard</span></li>
          <li class="menu-item" onclick="showTeacherPage('absensi')">üî≥ <span>QR Absensi</span></li>
          <li class="menu-item" onclick="showTeacherPage('nilai')">üìä <span>Management Nilai</span></li>
          <li class="menu-item" onclick="showTeacherPage('tugas')">üìù <span>Management Tugas</span></li>
          <li class="menu-item" onclick="showTeacherPage('kelas')">üë• <span>Management Kelas</span></li>
        </ul>
        <div class="section-title">Laporan</div>
        <ul class="menu">
          <li class="menu-item" onclick="showTeacherPage('analytics')">üìà <span>Analytics</span></li>
          <li class="menu-item" onclick="showTeacherPage('rapor')">üìÑ <span>Generate Rapor</span></li>
        </ul>
      `;
    }

    function generateTeacherContent() {
      return `
        <!-- TEACHER DASHBOARD -->
        <div id="teacher-dashboard-page" class="page-content active">
          <div class="teacher-hero">
            <h1>üë®‚Äçüè´ Dashboard Guru SIMBA</h1>
            <p>Manage semua kegiatan mengajar dalam satu platform</p>
          </div>

          <div class="cards">
            <div class="card-dash" onclick="showTeacherPage('kelas')">
              <h4>üë• Total Kelas</h4>
              <p><b>4 Kelas</b><br />X RPL, XI RPL, XII RPL</p>
            </div>
            <div class="card-dash" onclick="showTeacherPage('nilai')">
              <h4>üìä Nilai Belum Input</h4>
              <p><b>2 Tugas</b><br />Matematika & Bahasa</p>
            </div>
            <div class="card-dash" onclick="showTeacherPage('absensi')">
              <h4>‚è∞ Absensi Hari Ini</h4>
              <p><b>X RPL:</b> 15/30 hadir<br /><b>XI RPL:</b> Belum absen</p>
            </div>
            <div class="card-dash" onclick="showTeacherPage('tugas')">
              <h4>üìù Tugas Aktif</h4>
              <p><b>3 Tugas berjalan</b><br />2 deadline besok</p>
            </div>
          </div>

          <div class="teacher-quick-actions">
            <div class="action-btn" onclick="quickGenerateQR()">üî≥ Buat QR Absensi</div>
            <div class="action-btn" onclick="quickInputNilai()">üì• Input Nilai Massal</div>
            <div class="action-btn" onclick="quickCreateTugas()">üìù Buat Tugas Baru</div>
            <div class="action-btn" onclick="quickGenerateReport()">üìä Generate Laporan</div>
          </div>

          <div class="class-overview">
            <h3>Kelas yang Diampu</h3>
            <div class="classes-grid">
              <div class="class-card" onclick="openClassDetail('X RPL')">
                <h4>X RPL</h4>
                <p>30 Siswa ‚Ä¢ Matematika</p>
                <div class="class-stats">
                  <span>üìä Rata-rata: 85</span>
                  <span>‚úÖ Hadir: 28/30</span>
                </div>
              </div>
              <div class="class-card" onclick="openClassDetail('XI RPL')">
                <h4>XI RPL</h4>
                <p>28 Siswa ‚Ä¢ Matematika</p>
                <div class="class-stats">
                  <span>üìä Rata-rata: 82</span>
                  <span>‚úÖ Hadir: 25/28</span>
                </div>
              </div>
              <div class="class-card" onclick="openClassDetail('XII RPL')">
                <h4>XII RPL</h4>
                <p>32 Siswa ‚Ä¢ Matematika</p>
                <div class="class-stats">
                  <span>üìä Rata-rata: 88</span>
                  <span>‚úÖ Hadir: 30/32</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- TEACHER ABSENSI PAGE -->
        <div id="teacher-absensi-page" class="page-content">
          <div class="dashboard-title">üî≥ QR Code Absensi</div>
          <div class="welcome">Generate kode QR untuk absensi kelas - Siswa scan dengan HP mereka</div>

          <div class="qr-absensi-container">
            <div class="qr-generator-section">
              <h3>Buat Kode Absensi Baru</h3>
              <div class="form-group">
                <label>Pilih Kelas:</label>
                <select id="selectKelasQR">
                  <option value="xrpl">X RPL - Matematika</option>
                  <option value="xirpl">XI RPL - Matematika</option>
                  <option value="xiirpl">XII RPL - Matematika</option>
                </select>
              </div>
              <div class="form-group">
                <label>Durasi Absensi (menit):</label>
                <select id="selectDurasiQR">
                  <option value="5">5 Menit</option>
                  <option value="10">10 Menit</option>
                  <option value="15" selected>15 Menit</option>
                </select>
              </div>
              <button class="btn-generate-qr" onclick="generateQRCode()">üéØ Generate QR Code Absensi</button>
            </div>

            <div class="qr-display-section" id="qrDisplay" style="display: none;">
              <h3>Kode Absensi Aktif</h3>
              <div class="qr-code-container">
                <div id="qrcode"></div>
                <div class="qr-timer">
                  <span id="qrTimer">15:00</span>
                </div>
              </div>
              <div class="absensi-stats">
                <h4>üìä Real-time Absensi:</h4>
                <div id="absensiList"></div>
              </div>
              <button class="btn-stop-qr" onclick="stopQRCode()">‚èπÔ∏è Hentikan Absensi</button>
            </div>

            <div class="absensi-history">
              <h3>üìÖ History Absensi</h3>
              <div class="history-list">
                <div class="history-item">
                  <span>X RPL - 25 Nov 2023</span>
                  <span>28/30 hadir</span>
                </div>
                <div class="history-item">
                  <span>XI RPL - 24 Nov 2023</span>
                  <span>25/28 hadir</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- TEACHER NILAI MANAGEMENT PAGE -->
        <div id="teacher-nilai-page" class="page-content">
          <div class="dashboard-title">üìä Management Nilai</div>
          <div class="welcome">Input dan kelola nilai siswa dengan mudah</div>

          <div class="nilai-management-container">
            <div class="bulk-input-section">
              <h3>Input Nilai Massal</h3>
              <div class="form-group">
                <label>Pilih Kelas:</label>
                <select id="selectKelasNilai">
                  <option value="xrpl">X RPL</option>
                  <option value="xirpl">XI RPL</option>
                  <option value="xiirpl">XII RPL</option>
                </select>
              </div>
              <div class="form-group">
                <label>Mata Pelajaran:</label>
                <select id="selectMapelNilai">
                  <option value="matematika">Matematika</option>
                  <option value="bahasa">Bahasa Indonesia</option>
                  <option value="inggris">Bahasa Inggris</option>
                </select>
              </div>
              <button class="btn-generate-qr" onclick="loadSiswaForNilai()">üì• Muat Daftar Siswa</button>
            </div>

            <div class="nilai-table-section" id="nilaiTableSection" style="display: none;">
              <h3>Daftar Nilai Siswa</h3>
              <table class="nilai-table">
                <thead>
                  <tr>
                    <th>Nama Siswa</th>
                    <th>Nilai Tugas 1</th>
                    <th>Nilai Tugas 2</th>
                    <th>Nilai UTS</th>
                    <th>Nilai UAS</th>
                  </tr>
                </thead>
                <tbody id="nilaiTableBody">
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
              <button class="btn-save-nilai" onclick="saveAllNilai()">üíæ Simpan Semua Nilai</button>
            </div>
          </div>
        </div>

        <!-- OTHER TEACHER PAGES -->
        <div id="teacher-tugas-page" class="page-content">
          <div class="dashboard-title">üìù Management Tugas</div>
          <div class="welcome">Halaman management tugas - Fitur guru</div>
        </div>

        <div id="teacher-kelas-page" class="page-content">
          <div class="dashboard-title">üë• Management Kelas</div>
          <div class="welcome">Halaman management kelas - Fitur guru</div>
        </div>

        <div id="teacher-analytics-page" class="page-content">
          <div class="dashboard-title">üìà Analytics</div>
          <div class="welcome">Halaman analytics - Fitur guru</div>
        </div>

        <div id="teacher-rapor-page" class="page-content">
          <div class="dashboard-title">üìÑ Generate Rapor</div>
          <div class="welcome">Halaman generate rapor - Fitur guru</div>
        </div>
      `;
    }

    // ===== TEACHER DASHBOARD FUNCTIONS =====
    function updateTeacherDashboard(userData) {
      document.getElementById('teacherName').textContent = userData.username;
      document.getElementById('headerName').textContent = `Hi, ${userData.username} (Guru)`;
      document.getElementById('teacherSubject').textContent = "Matematika";
    }

    function initializeTeacherDashboard() {
      greeting();
      updateDate();
    }

    function showTeacherPage(pageName) {
      // Hide all teacher pages
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
      });
      
      // Remove active class from all menu items
      document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('active');
      });
      
      // Show selected page
      document.getElementById(`teacher-${pageName}-page`).classList.add('active');
      
      // Add active class to clicked menu item
      event.target.closest('.menu-item').classList.add('active');
    }

    // ===== QR CODE FUNCTIONS =====
    function generateQRCode() {
      const kelas = document.getElementById('selectKelasQR').value;
      const durasi = document.getElementById('selectDurasiQR').value;
      
      document.getElementById('qrDisplay').style.display = 'block';
      
      // Generate QR placeholder
      document.getElementById('qrcode').innerHTML = `
        <div class="qr-placeholder">
          <div style="font-size: 48px;">üî≥</div>
          <p>QR Code untuk: ${kelas.toUpperCase()}</p>
          <p><small>Scan dengan aplikasi SIMBA</small></p>
        </div>
      `;
      
      // Start timer
      startQRTimer(parseInt(durasi) * 60);
      
      // Simulate students scanning
      simulateStudentScans(kelas);
    }

    function startQRTimer(seconds) {
      qrTimeLeft = seconds;
      clearInterval(qrTimer);
      qrTimer = setInterval(() => {
        qrTimeLeft--;
        
        const minutes = Math.floor(qrTimeLeft / 60);
        const secs = qrTimeLeft % 60;
        document.getElementById('qrTimer').textContent = 
          `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        
        if (qrTimeLeft <= 0) {
          stopQRCode();
        }
      }, 1000);
    }

    function simulateStudentScans(kelas) {
      const demoStudents = [
        "Andi Wijaya", "Siti Rahma", "Budi Santoso", "Dewi Lestari", 
        "Rizki Pratama", "Maya Sari", "Fajar Nugroho", "Citra Dewi"
      ];
      
      let scannedCount = 0;
      const scanInterval = setInterval(() => {
        if (scannedCount < demoStudents.length && qrTimeLeft > 0) {
          const student = demoStudents[scannedCount];
          addStudentToAbsensiList(student);
          scannedCount++;
        } else {
          clearInterval(scanInterval);
        }
      }, 2000);
    }

    function addStudentToAbsensiList(studentName) {
      const absensiList = document.getElementById('absensiList');
      const newEntry = document.createElement('div');
      newEntry.className = 'absensi-entry';
      newEntry.innerHTML = `
        <span>‚úÖ ${studentName}</span>
        <span>${new Date().toLocaleTimeString()}</span>
      `;
      absensiList.appendChild(newEntry);
    }

    function stopQRCode() {
      clearInterval(qrTimer);
      document.getElementById('qrDisplay').style.display = 'none';
      alert(`Absensi selesai! ${document.getElementById('absensiList').children.length} siswa telah absen.`);
    }

    // ===== NILAI MANAGEMENT FUNCTIONS =====
    function loadSiswaForNilai() {
      const kelas = document.getElementById('selectKelasNilai').value;
      const mapel = document.getElementById('selectMapelNilai').value;
      
      // Demo data
      const demoStudents = [
        { id: 1, name: "Andi Wijaya", tugas1: 85, tugas2: 90, uts: 88, uas: 92 },
        { id: 2, name: "Siti Rahma", tugas1: 92, tugas2: 88, uts: 90, uas: 94 },
        { id: 3, name: "Budi Santoso", tugas1: 78, tugas2: 82, uts: 80, uas: 85 },
        { id: 4, name: "Dewi Lestari", tugas1: 88, tugas2: 85, uts: 86, uas: 89 }
      ];
      
      let tableHTML = '';
      demoStudents.forEach(student => {
        tableHTML += `
          <tr>
            <td>${student.name}</td>
            <td><input type="number" class="nilai-input" value="${student.tugas1}" data-id="${student.id}" data-type="tugas1"></td>
            <td><input type="number" class="nilai-input" value="${student.tugas2}" data-id="${student.id}" data-type="tugas2"></td>
            <td><input type="number" class="nilai-input" value="${student.uts}" data-id="${student.id}" data-type="uts"></td>
            <td><input type="number" class="nilai-input" value="${student.uas}" data-id="${student.id}" data-type="uas"></td>
          </tr>
        `;
      });
      
      document.getElementById('nilaiTableBody').innerHTML = tableHTML;
      document.getElementById('nilaiTableSection').style.display = 'block';
    }

    function saveAllNilai() {
      showLoader();
      setTimeout(() => {
        hideLoader();
        alert('‚úÖ Semua nilai berhasil disimpan!');
      }, 1000);
    }

    // ===== QUICK ACTIONS =====
    function quickGenerateQR() {
      showTeacherPage('absensi');
      setTimeout(() => {
        generateQRCode();
      }, 500);
    }

    function quickInputNilai() {
      showTeacherPage('nilai');
    }

    function quickCreateTugas() {
      showTeacherPage('tugas');
    }

    function quickGenerateReport() {
      showTeacherPage('analytics');
    }

    function openClassDetail(className) {
      alert(`Membuka detail kelas: ${className}`);
    }

    // ===== STUDENT DASHBOARD FUNCTIONS =====
    function updateStudentDashboard(userData) {
      document.getElementById('profileName').textContent = userData.username;
      document.getElementById('profileRole').textContent = userData.role;
      document.getElementById('headerName').textContent = `Hi, ${userData.username}`;
      document.getElementById('loginInfoRole').textContent = userData.role;
      document.getElementById('loginInfoUser').textContent = userData.username;
    }

    function showStudentPage(pageName) {
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
      });
      document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('active');
      });
      document.getElementById(`student-${pageName}-page`).classList.add('active');
      event.target.closest('.menu-item').classList.add('active');
    }

    // ===== STUDENT SPECIFIC FUNCTIONS =====
    function downloadKartu(format) {
      showLoader();
      setTimeout(() => {
        hideLoader();
        if (format === 'pdf') {
          alert('üìÑ Kartu Pelajar berhasil diunduh sebagai PDF!');
        } else {
          alert('üñºÔ∏è Kartu Pelajar berhasil diunduh sebagai Gambar!');
        }
      }, 1500);
    }

    function bukaMataPelajaran(mapel) {
      alert(`üìö Membuka mata pelajaran: ${mapel}\n\nFitur detail mata pelajaran akan segera tersedia!`);
    }

    function bukaMateri(materi) {
      alert(`üìñ Membuka materi: ${materi}\n\nMateri sedang dimuat...`);
    }

    function downloadMateri(materi) {
      showLoader();
      setTimeout(() => {
        hideLoader();
        alert(`üì• Materi "${materi}" berhasil diunduh!`);
      }, 1000);
    }

    function kerjakanTugas(tugas) {
      alert(`‚úèÔ∏è Membuka tugas: ${tugas}\n\nSiap mengerjakan tugas?`);
    }

    function lihatDetailTugas(tugas) {
      alert(`üëÅÔ∏è Detail tugas: ${tugas}\n\n- Status: Belum dikumpulkan\n- Deadline: 4 November 2025\n- Poin: 100`);
    }

    function filterNilai() {
      const semester = document.getElementById('semesterFilter').value;
      const jenisUjian = document.getElementById('jenisUjianFilter').value;
      
      if (semester && jenisUjian) {
        alert(`üîç Menampilkan nilai:\n- Semester: ${semester}\n- Jenis Ujian: ${jenisUjian.toUpperCase()}\n\nData sedang difilter...`);
      }
    }

    function lipatNilai() {
      alert('üìÑ Membuka form lipat nilai...\n\nFitur ini akan menampilkan rangkuman nilai dalam format yang mudah dibaca.');
    }

    function downloadNilai(format) {
      showLoader();
      setTimeout(() => {
        hideLoader();
        if (format === 'pdf') {
          alert('üìÑ Nilai berhasil diunduh sebagai PDF!');
        } else {
          alert('üìä Nilai berhasil diunduh sebagai Excel!');
        }
      }, 1500);
    }

    // ===== COMMON FUNCTIONS =====
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      sidebar.classList.toggle("collapsed");
      const toggleBtn = document.querySelector('.toggle-btn');
      if (sidebar.classList.contains('collapsed')) {
        toggleBtn.innerHTML = '‚Æû';
      } else {
        toggleBtn.innerHTML = '‚Æú';
      }
    }

    function toggleDark() {
      document.body.classList.toggle("dark");
      const darkToggle = document.querySelector('.dark-toggle');
      if (document.body.classList.contains('dark')) {
        darkToggle.innerHTML = '‚òÄÔ∏è Mode Terang';
        localStorage.setItem('darkMode', 'enabled');
      } else {
        darkToggle.innerHTML = 'üåô Mode Gelap';
        localStorage.setItem('darkMode', 'disabled');
      }
    }

    function greeting() {
      const hour = new Date().getHours();
      let greet = "Selamat Datang";
      if (hour < 10) greet = "Selamat Pagi";
      else if (hour < 15) greet = "Selamat Siang";
      else if (hour < 18) greet = "Selamat Sore";
      else greet = "Selamat Malam";

      document.getElementById("greetText").innerText = greet + ", di SIMBA V.1";
    }

    function updateDate() {
      const options = { weekday: "long", day: "numeric", month: "long", year: "numeric" };
      const dateElement = document.getElementById("todayDate");
      if (dateElement) {
        dateElement.innerText = new Date().toLocaleDateString("id-ID", options);
      }
    }

    function initializeDashboard() {
      greeting();
      updateDate();
      generateCalendar();
      initializeProgressBars();
    }

    function generateCalendar() {
      const calendarGrid = document.getElementById('calendarGrid');
      if (!calendarGrid) return;
      
      const days = ['M', 'S', 'S', 'R', 'K', 'J', 'S'];
      const today = new Date().getDate();
      
      // Clear existing calendar
      calendarGrid.innerHTML = '';
      
      // Add day headers
      days.forEach(day => {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        dayElement.style.fontWeight = 'bold';
        dayElement.textContent = day;
        calendarGrid.appendChild(dayElement);
      });
      
      // Add days (simple version)
      for (let i = 1; i <= 31; i++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        if (i === today) {
          dayElement.classList.add('current');
        }
        dayElement.textContent = i;
        calendarGrid.appendChild(dayElement);
      }
    }

    function initializeProgressBars() {
      const observerOptions = {
        threshold: 0.5
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const width = entry.target.style.width;
            entry.target.style.width = '0%';
            setTimeout(() => {
              entry.target.style.width = width;
            }, 300);
          }
        });
      }, observerOptions);

      // Observe progress bars
      document.querySelectorAll('.progress-fill').forEach(bar => {
        observer.observe(bar);
      });
    }

    function showFullCalendar() {
      alert("üìÖ Membuka kalender lengkap...");
    }

    function doLogout() {
      if (confirm("Yakin ingin logout?")) {
        showLoader();
        setTimeout(() => {
          localStorage.removeItem('simba_user');
          hideLoader();
          document.getElementById('dashboardPage').classList.remove('active');
          document.getElementById('loginPage').classList.remove('hidden');
          document.getElementById('username').value = '';
          document.getElementById('password').value = '';
          document.getElementById('role').value = '';
          alert("Anda telah logout");
        }, 1000);
      }
    }

    function showNotifications() {
      alert("üîî Anda memiliki 3 notifikasi baru:\n- Tugas Matematika deadline besok\n- Pengumuman ujian minggu depan\n- Pembayaran SPP sudah dibuka");
    }

    function quickAction(action) {
      const actions = {
        absen: "Membuka form absensi...",
        tugas: "Menampilkan daftar tugas...",
        jadwal: "Menampilkan jadwal hari ini...",
        rapor: "Membuka nilai terbaru..."
      };
      alert(actions[action]);
    }

    function showAbsenModal() {
      alert("üìù Form Absensi:\nPilih status:\n- Hadir\n- Sakit\n- Izin\n\nKlik OK untuk membuka form lengkap");
    }

    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', function() {
      const savedUser = localStorage.getItem('simba_user');
      if (savedUser) {
        const userData = JSON.parse(savedUser);
        currentUserRole = userData.role;
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('dashboardPage').classList.add('active');
        
        if (userData.role === "Guru") {
          switchToTeacherDashboard(userData);
        } else {
          switchToStudentDashboard(userData);
        }
      }
      
      if (localStorage.getItem('darkMode') === 'enabled') {
        document.body.classList.add('dark');
        document.querySelector('.dark-toggle').innerHTML = '‚òÄÔ∏è Mode Terang';
      }
    });

    document.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !document.getElementById('loginPage').classList.contains('hidden')) {
        doLogin();
      }
    });
  </script>
</body>
</html>